{% extends 'task/base.html' %}

{% block style %}
table td {
	border: solid black 1px;
}
table {
	border-collapse: collapse;
}
.calendar td {
	height: 100px;
	min-width: 100px;
}
td.today {
	background-color: #bbbbff;
}
{% endblock %}

{% block content %}
<div id="content-main">
	<div class="module">
		<table style="border:1px solid black">
			<tr>
				<th>Title</th>
				<th>SP</th>
				<th>SA</th>
				<th>EP</th>
				<th>EA</th>
				<th>DP</th>
				<th>DA</th>
			</tr>
			{% for task, sp, sa, ep, ea, dp, da in tasks %}
			<tr>
				<td>{{ task.title }}</td>
				<td>{{ sp }}</td>
				<td>{{ sa }}</td>
				<td>{{ ep }}</td>
				<td>{{ ea }}</td>
				<td>{{ dp }}</td>
				<td>{{ da }}</td>

				<td>
					<form action="{% url 'task:start_now' task.id %}" method="post">
						{% csrf_token %}
						<input type="submit" value="START"/>
					</form>
				</td>
				<td>
					<form action="{% url 'task:end_now' task.id %}" method="post">
						{% csrf_token %}
						<input type="submit" value="END"/>
					</form>
				</td>
			</tr>
			{% endfor %}
		</table>
	</div>
</div>

<div class="calendar">
	<table>
		<tr>
			<th>Monday</th>
			<th>Tuesday</th>
			<th>Wednesday</th>
			<th>Thursday</th>
			<th>Friday</th>
			<th>Saturday</th>
			<th>Sunday</th>
		</tr>
		{% for w in cal.weeks %}
		<tr>
			{% for d in w %}
			<td class="{{ d.html_class }}">
				{{ d.date.day }}<br>

				<table>
					{% for t in d.tasks %}
					<tr>
					<td>
						<form action="{% url 'task:end_now' t.id %}" method="post">
							{% csrf_token %}
							<input type="submit" value="END"/>
						</form>
					</td>
					<td>{{ t.title }}</td>
					</tr>
					{% endfor %}
				</table>
			</td>
			{% endfor %}
		</tr>
	{% endfor %}
</table>
</div>
{% endblock %}

