\documentclass{article}

\usepackage{amsmath}
\usepackage{nomencl}
\RequirePackage{ifthen}

\makenomenclature

\begin{document}

\renewcommand{\nomgroup}[1]{%
	\ifthenelse{\equal{#1}{A}}{\item[\textbf{Variables}]}{%
	\ifthenelse{\equal{#1}{B}}{\item[\textbf{Subscripts}]}{}}}


\nomenclature[A]{$\mathbf{x}$}{position vector}
\nomenclature[A]{$\mathbf{x}$}{ vector}
\nomenclature[A]{$\mathbf{F}$}{force vector}

\nomenclature[B]{$B$}{body frame}
\nomenclature[B]{$R$}{rotor}
\nomenclature[B]{$D$}{drag}

\printnomenclature

\section{Equations of Motion}

\subsection{Reference}

Gravity force in inertial frame

\[
\mathbf{g} = -g \mathbf{k}
\]

Rotor force in body frame

\[
\mathbf{F}_{R,B} = k \left( \gamma_1 + \gamma_2 + \gamma_3 + \gamma_4 \right) \mathbf{k}
\]

Rotor force in inertial frame

\[
\mathbf{F}_R = \mathbf{R}(\mathbf{q}) \mathbf{F}_{R,B}(\gamma)
\]

Drag force in body frame

\[
\mathbf{F}_{D,B}(\dot{\mathbf{x}}_B)
\]

\[
\dot{\mathbf{x}}_B = \mathbf{R}^{-1} \dot{\mathbf{x}}
\]

Drag force in inertial frame

\[
\mathbf{F}_D =  \mathbf{R}(\mathbf{q}) \mathbf{F}_{D,B}(\dot{\mathbf{x}}_B)
\]


\subsection{Translation}

\[
m \ddot{\mathbf{x}} = m \mathbf{g} + \mathbf{F}_R(\mathbf{q},\gamma) + \mathbf{F}_D(\dot{\mathbf{x}},\mathbf{q})
\]

\[
\ddot{\mathbf{x}} = \mathbf{g} + \frac{1}{m} \mathbf{F}_R(\mathbf{q},\gamma) + \frac{1}{m} \mathbf{F}_D(\dot{\mathbf{x}},\mathbf{q})
\]




%\[
%\ddot{\mathbf{x}} = \dot{\mathbf{x}}_2
%\]

\subsection{Rotation}

\[
I \dot{\omega} + \omega \times \left( I \omega \right) = \tau
\]

\[
I =
\begin{bmatrix}
I_{xx} & 0 & 0 \\
0 & I_{yy} & 0 \\
0 & 0 & I_{zz}
\end{bmatrix}
\]

\[
\tau_B =
\begin{bmatrix}
Lk \left( \gamma_1 - \gamma_3 \right) \\
Lk \left( \gamma_2 - \gamma_4 \right) \\
b \left( \gamma_1 - \gamma_2 + \gamma_3 - \gamma_4 \right)
\end{bmatrix}
\]

\section{Control}

\subsection{Attitude}
Tracking error

\[
\mathbf{e}_1 = \mathbf{q}_{ref} - \mathbf{q}
\]

\[
\dot{\mathbf{e}}_1 = \dot{\mathbf{q}}_{ref} - \dot{\mathbf{q}}
\]

\[
\dot{\mathbf{e}}_1 = \dot{\mathbf{q}}_{ref} - \frac{1}{2} \mathbf{E} \boldsymbol\omega
\]

The $\boldsymbol\omega$ is not our control input and has its own dynamic. So we set fot it a desired behavior and consider it as our virtual control

\[
\boldsymbol\omega_{ref} = c_1 \mathbf{e}_1 + \dot{\mathbf{q}}_{ref} + \lambda_1 \chi_1
\]

\[
\mathbf{e_2} = \boldsymbol\omega_{ref} - \boldsymbol\omega
\]

\subsection{Position}



\[
\mathbf{e} = \mathbf{x}_{ref} - \mathbf{x}
\]

\[
\mathbf{F} =
m \mathbf{a} =
m \left( \mathbf{K}_p \mathbf{e} + \mathbf{K}_d \dot{\mathbf{e}} \right)
\]



\end{document}



